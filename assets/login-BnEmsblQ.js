import"./modulepreload-polyfill-B5Qt9EMX.js";import{a as s}from"./axios-CdwnNvdk.js";const a=document.getElementById("loginError"),d=localStorage.getItem("access");d&&(window.location.href="/admin/");document.getElementById("loginForm").addEventListener("submit",async function(t){var n;t.preventDefault();const e=document.getElementById("username").value,r=document.getElementById("password").value;try{const o=await s.post("/auth/login/",{username:e,password:r}),{access:c,refresh:i}=o.data;localStorage.setItem("access",c),localStorage.setItem("refresh",i),await m(),window.location.href="/admin/"}catch(o){a.textContent=(n=o.response)==null?void 0:n.data.detail,setTimeout(()=>{a.textContent=" "},4e3)}});async function m(){var t;try{const e=await s.get("/vehicules/");console.log("Données admin :",e.data)}catch(e){a.textContent="Erreur d'accès à la page admin",setTimeout(()=>{a.textContent=" "},3e3),console.error("Erreur d'accès à /admin :",((t=e.response)==null?void 0:t.data)||e.message)}}
